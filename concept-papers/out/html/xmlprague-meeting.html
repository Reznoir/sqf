<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Schematron QuickFix concept session during XMLPrague 2016</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><meta name="description" content="During the XMLPrague, we discussed in a small group current issues of the Schematron QuickFix language to prepare the second draft version of the specification. In the following we want to update you by a summary of the discussed issues and our conclusions. This article is based on some short notes which were made during the session."></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article"><div class="titlepage"><div><div><h1 class="title"><a name="d5e1"></a>Schematron QuickFix concept session during XMLPrague 2016</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Heino</span> <span class="surname">Schmull</span></h3><div class="affiliation"><span class="orgname">pagina GmbH<br></span></div><code class="email">&lt;<a class="email" href="mailto:heino.schmull@pagina-tuebingen.de">heino.schmull@pagina-tuebingen.de</a>&gt;</code></div></div><div><div class="author"><h3 class="author"><span class="firstname">Nico</span> <span class="surname">Kutscherauer</span></h3><div class="affiliation"><span class="orgname">data2type GmbH<br></span></div><code class="email">&lt;<a class="email" href="mailto:kutscherauer@schematron-quickfix.com">kutscherauer@schematron-quickfix.com</a>&gt;</code></div></div><div><div class="author"><h3 class="author"><span class="firstname">Octavian</span> <span class="surname">Nadolu</span></h3><div class="affiliation"><span class="orgname">oXygen XML Editor<br></span></div><code class="email">&lt;<a class="email" href="mailto:octavian_nadolu@sync.ro">octavian_nadolu@sync.ro</a>&gt;</code></div></div><div><div class="author"><h3 class="author"><span class="firstname">Patrik</span> <span class="surname">Stellmann</span></h3><div class="affiliation"><span class="orgname">GDV Dienstleistungs-GmbH &amp; Co. KG<br></span></div><code class="email">&lt;<a class="email" href="mailto:Patrik.Stellmann@gdv-dl.de">Patrik.Stellmann@gdv-dl.de</a>&gt;</code></div></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>During the XMLPrague, we discussed in a small group current issues of the Schematron QuickFix language to prepare the second draft version of the specification.</p><p>In the following we want to update you by a summary of the discussed issues and our conclusions.</p><p>This article is based on some short notes which were made during the
                session.</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#d5e37">Setting</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d5e39">Participant List (Alphabetical Order)</a></span></dt><dt><span class="sect2"><a href="#d5e78">Issue Overview</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d5e96">Details</a></span></dt><dd><dl><dt><span class="sect2"><a href="#dynamic_fixes">Dynamic fixes</a></span></dt><dt><span class="sect2"><a href="#call_fix">Call fix elements</a></span></dt><dt><span class="sect2"><a href="#localisation">Localisation concepts</a></span></dt><dt><span class="sect2"><a href="#sqf_keep">Nested processing of nodes by Activity Elements</a></span></dt><dt><span class="sect2"><a href="#sqf_copy">Additional substitution for common XSLT elements</a></span></dt></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e37"></a>Setting</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d5e39"></a>Participant List (Alphabetical Order)</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="author"><span class="firstname">Heino</span> <span class="surname">Schmull</span></span></p></li><li class="listitem"><p>
                        <span class="author"><span class="firstname">Nico</span> <span class="surname">Kutscherauer</span></span></p></li><li class="listitem"><p>
                        <span class="author"><span class="firstname">Octavian</span> <span class="surname">Nadolu</span></span></p></li><li class="listitem"><p>
                        <span class="author"><span class="firstname">Patrik</span> <span class="surname">Stellmann</span></span></p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d5e78"></a>Issue Overview</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="#dynamic_fixes" title="Dynamic fixes">Dynamic fixes</a></p></li><li class="listitem"><p><a class="link" href="#call_fix" title="Call fix elements">Call fix concepts</a></p></li><li class="listitem"><p><a class="link" href="#localisation" title="Localisation concepts">Localisation concepts</a></p></li><li class="listitem"><p><a class="link" href="#sqf_keep" title="Nested processing of nodes by Activity Elements">Nested processing of nodes by Activity Elements</a></p></li><li class="listitem"><p><a class="link" href="#sqf_copy" title="Additional substitution for common XSLT elements">Additional substitution for common XSLT elements</a></p></li></ul></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e96"></a>Details</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="dynamic_fixes"></a>Dynamic fixes</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d5e100"></a>Issues Summary</h4></div></div></div><p><a class="link" href="https://github.com/schematron-quickfix/sqf/issues/3" target="_top">https://github.com/schematron-quickfix/sqf/issues/3</a></p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d5e104"></a>Conclusion</h4></div></div></div><p>Everyone was satisfied by using Patrik's example.</p><p>Short summary:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Dynamic fixes will be created by <code class="code">sqf:fix</code> elements with an <code class="code">use-for-each</code> attribute.</p></li><li class="listitem"><p>The <code class="code">use-for-each</code> attribute has an XPath as value. For each return value one fix should be generated.</p></li><li class="listitem"><p>Context is still the same, with <code class="code">$sqf:current</code> (build-in
                            variable)
                            you can have access to the current returned value. </p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="call_fix"></a>Call fix elements</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d5e121"></a>Issues Summary</h4></div></div></div><p>The current problem was already described in this issue: <a class="link" href="https://github.com/schematron-quickfix/sqf/issues/2" target="_top">https://github.com/schematron-quickfix/sqf/issues/2</a></p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d5e125"></a>Conclusion</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="code">sqf:description</code> is optional
                            and
                            unbounded, but the language (<code class="code">@xml:lang</code>)
                            needs to be unique in one <code class="code">sqf:fix</code> element</p><p>(if possible, auto completion should add it automatically when
                            creating <code class="code">sqf:fix</code> elements)</p></li><li class="listitem"><p>The <code class="code">sqf:fix</code> must have a description, if there is no or
                            more than one <code class="code">sqf:call-fix</code> with a description
                            inside.</p></li><li class="listitem"><p>If you have exactly one <code class="code">sqf:call-fix</code> and no <code class="code">sqf:description</code> element, the called fix must have a <code class="code">sqf:description</code> or inherit one.</p></li><li class="listitem"><p>The languages of the descriptions of the called fix and the calling fix could be different:</p><p>Use case: Use <code class="code">sqf:call-fix</code> to add a different language to an existing fix.</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d5e148"></a>Open Issues</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>This concept ignores the localisation proposal below.</p></li><li class="listitem"><p>XSD has limitations, so the <a class="link" href="https://github.com/schematron-quickfix/sqf/blob/master/schemas/schematron-quickFix.xsd" target="_top">schematron-quickfix.xsd</a> would be very lax. The order of the <code class="code">sqf:fix</code> content would be checked by Schematron (<a class="link" href="https://github.com/schematron-quickfix/sqf/blob/master/schemas/sqf.sch" target="_top">sqf.sch</a>). One suggestion was, to switch the basic schema (<a class="link" href="https://github.com/schematron-quickfix/sqf/blob/master/schemas/schematron-quickFix.xsd" target="_top">schematron-quickfix.xsd</a>) to RELAX NG</p></li></ol></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="localisation"></a>Localisation concepts</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d5e161"></a>Issues Summary</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The concept above includes a localisation concept: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Multiple descriptions which have to be in different languages.</p></li><li class="listitem"><p>Concept for adding a description to an existing fix.</p></li></ul></div></li><li class="listitem"><p>There is no concept for referring to descriptions, which are stored in an external file (library).</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d5e173"></a>Conclusion</h4></div></div></div><p>There was no final concept for this issue, just a couple of proposals:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Use Schematron localisation concept.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Add <code class="code">@diagnostic</code> to <code class="code">sqf:title</code> and <code class="code">sqf:p</code>.</p></li><li class="listitem"><p>Remove the <code class="code">@xml:lang</code> from the <code class="code">sqf:description</code>.</p></li><li class="listitem"><p>Add <code class="code">@diagnostic</code> to <code class="code">sqf:description</code> with maybe multiple ids for localisation.</p></li><li class="listitem"><p>Multiple <code class="code">sqf:title</code> with <code class="code">@xml:lang</code>.</p></li><li class="listitem"><p>Only one <code class="code">sqf:description</code> per <code class="code">sqf:fix</code> element.</p></li></ul></div><p>Main goal would be to have all
                                <code class="code">sqf:title</code>/<code class="code">sqf:p</code> in one external
                            document.</p></li><li class="listitem"><p>Design an own referencing concept for descriptions.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Something like <code class="code">sqf:diagnostic</code>, but there was no further discussion about that. </p></li></ul></div></li><li class="listitem"><p>Allow to specify global descriptions and refer them.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Allow <code class="code">sqf:description</code> in <code class="code">sqf:fixes</code>.</p></li><li class="listitem"><p>Add <code class="code">ref</code> and <code class="code">id</code> attribute to <code class="code">sqf:description</code>.</p></li><li class="listitem"><p>An empty <code class="code">sqf:description</code> element with a <code class="code">ref</code> attribute refers to a global <code class="code">sch:description</code> element with an <code class="code">id</code> attribute.</p></li></ul></div></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d5e228"></a>Open Issues</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The different proposals should be discussed.</p></li><li class="listitem"><p>Maybe a localisation specialist should be called in. </p></li><li class="listitem"><p>The discussion should be continued in this issue <a class="link" href="https://github.com/schematron-quickfix/sqf/issues/1" target="_top">https://github.com/schematron-quickfix/sqf/issues/1</a></p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sqf_keep"></a>Nested processing of nodes by Activity Elements</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d5e240"></a>Issue Summary</h4></div></div></div><p>The first question was after a use case for the <code class="code">sqf:keep</code> element:</p><p>The following example shows an Activity Element, which transforms all child elements of an specific namespace in the <code class="code">NULL</code> namespace: </p><pre class="programlisting">&lt;sqf:replace match=".//sqf:*" target="{local-name()}" node-type="element"&gt;
    &lt;sqf:keep/&gt;
&lt;/sqf:replace&gt;</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d5e247"></a>Conclusion</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The group agreed, that this is a reasonable use case of <code class="code">sqf:keep</code> and it is impossible to do this with other SQF structures.</p></li><li class="listitem"><p>But because this is a very special case, we proposed to remove the <code class="code">sqf:keep</code> element from the specification.</p></li><li class="listitem"><p>The use cases are also realizable by embedded XSLT.</p></li><li class="listitem"><p>Opened a new issue to discuss this <a class="link" href="https://github.com/schematron-quickfix/sqf/issues/14" target="_top">https://github.com/schematron-quickfix/sqf/issues/14</a></p></li></ul></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sqf_copy"></a>Additional substitution for common XSLT elements</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d5e263"></a>Issue Summary</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The issue resulted by removing the <code class="code">sqf:keep</code> element.</p></li><li class="listitem"><p>It was noticed, that there is a huge usage of the <code class="code">xsl:copy-of</code> element (instead of <code class="code">sqf:keep</code>).</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d5e273"></a>Conclusion</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Introduction of a <code class="code">sqf:copy-of</code> element, because it (<code class="code">xsl:copy-of</code>) will be used really often to copy existing nodes.</p></li><li class="listitem"><p>For non-XSLT user, it is more understandable, if he don't have to change the namespace to copy nodes (like <code class="code">xsl:value-of</code> -&gt; <code class="code">sch:value-of</code>).</p></li><li class="listitem"><p>No default for the <code class="code">select</code> attribute, because there are two reasonable options (<code class="code">.</code> and <code class="code">node()</code>).</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="d5e289"></a>Open Issues</h4></div></div></div><p>This issue popped up, after the session: <a class="link" href="https://github.com/schematron-quickfix/sqf/issues/9" target="_top">https://github.com/schematron-quickfix/sqf/issues/9</a></p></div></div></div></div></body></html>